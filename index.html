<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
    <title>‡¶¨‡¶ø‡¶∞‡¶ø‡ßü‡¶æ‡¶®‡¶ø ‡¶¶‡¶ø‡¶¨‡ßá - PC/Laptop Version</title>
    <!-- Font Awesome 5 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
    <!-- Google Font for Bengali -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Hind Siliguri', sans-serif;
        }

        body {
            background-color: #f0e5d5; /* lighter background for larger screens */
            color: #2d2d2d;
            line-height: 1.5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* Main container - now responsive for all screens */
        .app-container {
            width: 100%;
            max-width: 1300px; /* much wider for PC */
            background-color: #ffffff;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            border-radius: 30px;
            padding: 2rem;
            position: relative;
            margin: 0 auto;
        }

        /* Two-column layout for PC */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        /* Left column - filters and list */
        .left-column {
            background-color: #fef9f2;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: inset 0 0 0 1px #f0e0cc;
        }

        /* Right column - map */
        .right-column {
            background-color: #fef9f2;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: inset 0 0 0 1px #f0e0cc;
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-icons {
            display: flex;
            gap: 1.5rem;
            font-size: 2rem;
            color: #b45f2b;
        }

        .header-icons span {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .header-icons span:hover {
            transform: scale(1.1);
        }

        .header-title h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #b45f2b;
            letter-spacing: 2px;
            text-shadow: 3px 3px 0 #f0d5b0;
            cursor: pointer;
        }

        .subhead-stats {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #fceae3;
            padding: 0.7rem 1.5rem;
            border-radius: 50px;
            width: fit-content;
            margin-bottom: 1.5rem;
            font-weight: 500;
            font-size: 1.2rem;
            border: 2px solid #e6c9a8;
            cursor: pointer;
            transition: all 0.2s;
        }
        .subhead-stats:hover {
            background-color: #f5d5c0;
        }

        .subhead-stats i {
            color: #b45f2b;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background-color: #f3efe8;
            border-radius: 60px;
            padding: 0.6rem 1.5rem;
            margin-bottom: 2rem;
            border: 2px solid #dcc7aa;
            width: 100%;
        }

        .search-bar i {
            color: #9e7b56;
            font-size: 1.4rem;
            margin-right: 1rem;
        }

        .search-bar input {
            flex: 1;
            border: none;
            background: transparent;
            padding: 0.7rem 0;
            font-size: 1.1rem;
            outline: none;
            color: #2d2d2d;
        }

        .search-bar input::placeholder {
            color: #aa8c6f;
        }

        .search-bar .live-badge {
            background-color: #e03a3a;
            color: white;
            padding: 0.4rem 1.5rem;
            border-radius: 40px;
            font-size: 1rem;
            font-weight: 600;
            margin-left: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            white-space: nowrap;
        }
        .search-bar .live-badge:hover {
            background-color: #b02d2d;
        }

        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-bottom: 2rem;
            align-items: center;
        }

        .filter-chip {
            background-color: #f3efe8;
            border: 2px solid #d4b68a;
            border-radius: 50px;
            padding: 0.6rem 1.5rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #5a3e2b;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .filter-chip.active {
            background-color: #b45f2b;
            color: white;
            border-color: #b45f2b;
        }

        .filter-chip:hover {
            background-color: #e0d0bb;
            transform: translateY(-2px);
        }
        .filter-chip.active:hover {
            background-color: #9e4f1f;
        }

        .biryani-icon-large {
            font-size: 2.2rem;
            margin-right: 0.2rem;
        }

        /* Map container for PC */
        .map-container {
            width: 100%;
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid #d4b68a;
            margin-bottom: 1rem;
        }
        #map {
            height: 450px; /* taller for PC */
            width: 100%;
            z-index: 1;
        }

        .location-status {
            background-color: #e8f0fe;
            padding: 0.8rem;
            border-radius: 30px;
            text-align: center;
            margin-bottom: 1rem;
            font-size: 1rem;
            color: #1e3d42;
            border: 2px solid #b45f2b;
        }

        /* Manual add form */
        .add-form-container {
            background-color: #fae9d8;
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 3px solid #b45f2b;
            display: none;
        }
        .add-form-container h3 {
            color: #b45f2b;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group.full-width {
            grid-column: span 2;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            color: #5a3e2b;
            margin-bottom: 0.3rem;
            font-size: 1rem;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #d4b68a;
            border-radius: 12px;
            font-size: 1rem;
            background-color: white;
        }
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        .form-row {
            display: flex;
            gap: 1rem;
        }
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }
        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background-color: #b45f2b;
            color: white;
        }
        .btn-primary:hover {
            background-color: #9e4f1f;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: #e0d0bb;
            color: #5a3e2b;
        }
        .btn-secondary:hover {
            background-color: #d4b68a;
            transform: translateY(-2px);
        }
        .btn-biryani {
            background-color: #b45f2b;
            color: white;
            padding: 0.6rem 1.5rem;
            font-size: 1rem;
            border-radius: 30px;
        }
        .btn-biryani:hover {
            background-color: #9e4f1f;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 2rem 0 1.5rem 0;
        }

        .section-header h3 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #2d2d2d;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .section-header i {
            color: #b45f2b;
            font-size: 1.6rem;
        }

        .badge-district {
            background-color: #f0d5b0;
            padding: 0.4rem 1.5rem;
            border-radius: 40px;
            font-size: 1.1rem;
            font-weight: 500;
            color: #5a3e2b;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid #d4b68a;
        }
        .badge-district:hover {
            background-color: #e6c28b;
        }

        .mosque-list {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 0.8rem;
        }

        .mosque-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            border-bottom: 2px dashed #e2d5c0;
            padding-bottom: 1rem;
            transition: background-color 0.2s;
            cursor: pointer;
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .mosque-item:hover {
            background-color: #fcf6ed;
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .mosque-icon {
            font-size: 3rem;
            min-width: 3.5rem;
            text-align: center;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }

        .mosque-details {
            flex: 1;
        }

        .mosque-name {
            font-weight: 700;
            font-size: 1.3rem;
            color: #1e3d42;
            line-height: 1.4;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .donation-badge {
            background-color: #2e7d32;
            color: white;
            padding: 0.2rem 1rem;
            border-radius: 30px;
            font-size: 0.9rem;
        }

        .mosque-location {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.05rem;
            color: #766b5c;
            margin: 0.3rem 0;
        }

        .mosque-location i {
            font-size: 0.9rem;
            color: #b45f2b;
        }

        .distance-badge {
            background-color: #e8f0fe;
            border-radius: 30px;
            padding: 0.2rem 1rem;
            font-size: 0.95rem;
            font-weight: 600;
            color: #1e3d42;
            border: 2px solid #b45f2b;
        }

        .biryani-type {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
            font-weight: 500;
            margin-top: 0.3rem;
        }

        .type-icon {
            font-size: 1.5rem;
        }

        .none-biryani {
            color: #9e2a2a;
            background-color: #ffe1e1;
            padding: 0.2rem 1.2rem;
            border-radius: 40px;
            display: inline-block;
            font-size: 1rem;
            font-weight: 600;
            border: 2px solid #e03a3a;
        }

        .footer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2.5rem;
            padding-top: 1.5rem;
            border-top: 3px solid #ecdbba;
        }

        .footer-icons {
            display: flex;
            gap: 2rem;
            font-size: 2.2rem;
            color: #b45f2b;
        }

        .footer-icons span {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .footer-icons span:hover {
            transform: scale(1.2);
        }

        .footer-bd {
            font-size: 2rem;
            font-weight: 600;
            color: #1e5631;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .footer-bd:hover {
            transform: scale(1.1);
        }

        .banner-bg {
            background-color: #fae9d8;
            border-radius: 20px;
            padding: 0.5rem 1.5rem;
            margin: 1.5rem 0;
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
            justify-content: center;
            font-size: 2rem;
        }

        .animal-filter-bar {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            font-size: 2.2rem;
            margin-top: 1.5rem;
            opacity: 0.9;
            align-items: center;
            background-color: #fae9d8;
            padding: 1rem;
            border-radius: 60px;
        }
        .animal-filter-bar span {
            cursor: pointer;
            transition: all 0.2s;
        }
        .animal-filter-bar span:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 5px #b45f2b);
        }

        .mosque-list::-webkit-scrollbar {
            width: 8px;
        }
        .mosque-list::-webkit-scrollbar-track {
            background: #f1e5d5;
            border-radius: 10px;
        }
        .mosque-list::-webkit-scrollbar-thumb {
            background: #b45f2b;
            border-radius: 10px;
        }

        .toast-message {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1e3d42;
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 2000;
            display: none;
            border: 2px solid #b45f2b;
        }

        .biryani-marker {
            font-size: 2.2rem;
            text-align: center;
            line-height: 1;
            filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.3));
        }
        .user-marker {
            font-size: 2.2rem;
            text-align: center;
            line-height: 1;
        }

        /* Responsive for smaller screens */
        @media (max-width: 900px) {
            body { padding: 10px; }
            .main-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .app-container { padding: 1rem; }
            .header-title h1 { font-size: 2rem; }
            .header-icons { font-size: 1.6rem; }
            .filter-chip { padding: 0.4rem 1rem; font-size: 0.95rem; }
        }

        @media (min-width: 1400px) {
            .app-container { max-width: 1600px; }
            .header-title h1 { font-size: 3rem; }
            .filter-chip { font-size: 1.2rem; }
        }
    </style>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- header -->
        <div class="header-row">
            <div class="header-icons">
                <span onclick="showToast('üçõ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶Ü‡¶á‡¶ï‡¶®')">üçõ</span>
                <span onclick="toggleAddForm()">‚ûï</span>
                <span onclick="removeLastMosque()">‚àí</span>
                <span onclick="showToast('üçõ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶Ü‡¶á‡¶ï‡¶®')">üçõ</span>
            </div>
          <br>
            <Marquee behavior="scroll" direction="left" scrollamount="5">
                <span style="color: #b45f2b; font-weight: bold;">‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶¶‡¶ø‡¶¨‡ßá - ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶π‡¶ú‡ßá‡¶á ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®!</span>
            </Marquee>

            <div class="header-title">
                <h1 onclick="showToast('‡¶¨‡¶ø‡¶∞‡¶ø‡ßü‡¶æ‡¶®‡¶ø ‡¶¶‡¶ø‡¶¨‡ßá')">‡¶¨‡¶ø‡¶∞‡¶ø‡ßü‡¶æ‡¶®‡¶ø ‡¶¶‡¶ø‡¶¨‡ßá</h1>
            </div>
        </div>

        <!-- stats badge -->
        <div class="subhead-stats" onclick="showToast('‡ß¨‡ß™ ‡¶ú‡ßá‡¶≤‡¶æ | ‡ß´‡ß¶‡ß¶+ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶')">
            <i class="fas fa-map-marker-alt"></i>
            <span>‡ß¨‡ß™ ‡¶ú‡ßá‡¶≤‡¶æ | ‡ß´‡ß¶‡ß¶+ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶</span>
        </div>

        <!-- search + live -->
        <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="üîç ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶ ‡¶¨‡¶æ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." onkeyup="filterMosques()">
            <span class="live-badge" onclick="toggleLiveMap()">‡¶≤‡¶æ‡¶á‡¶≠ üó∫Ô∏è</span>
        </div>

        <!-- Main Grid: Left Column (Filters + List) and Right Column (Map) -->
        <div class="main-grid">
            <!-- Left Column -->
            <div class="left-column">
                <!-- filter chips -->
                <div class="filter-row" id="filterRow">
                    <div class="filter-chip active" data-filter="all" onclick="setActiveFilter(this); filterByDivision('all')"><i class="fas fa-flag"></i> üáßüá© ‡¶∏‡¶¨</div>
                    <div class="filter-chip" data-filter="dhaka" onclick="setActiveFilter(this); filterByDivision('‡¶¢‡¶æ‡¶ï‡¶æ')">‡¶¢‡¶æ‡¶ï‡¶æ</div>
                    <div class="filter-chip" data-filter="ctg" onclick="setActiveFilter(this); filterByDivision('‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ')">‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</div>
                    <div class="filter-chip" data-filter="rajshahi" onclick="setActiveFilter(this); filterByDivision('‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ')">‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ</div>
                    <div class="filter-chip" data-filter="khulna" onclick="setActiveFilter(this); filterByDivision('‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ')">‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ</div>
                    <div class="filter-chip" data-filter="sylhet" onclick="setActiveFilter(this); filterByDivision('‡¶∏‡¶ø‡¶≤‡ßá‡¶ü')">‡¶∏‡¶ø‡¶≤‡ßá‡¶ü</div>
                    <div class="filter-chip" data-filter="barisal" onclick="setActiveFilter(this); filterByDivision('‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤')">‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤</div>
                    <div class="filter-chip" data-filter="rangpur" onclick="setActiveFilter(this); filterByDivision('‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞')">‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞</div>
                    <div class="filter-chip" data-filter="biryani" onclick="setActiveFilter(this); filterByBiryaniType()"><span class="biryani-icon-large">üçõ</span> ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø</div>
                    <div class="filter-chip" onclick="toggleAddForm()"><i class="fas fa-plus-circle"></i> ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</div>
                    <div class="filter-chip" onclick="showToast('üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂')">üáßüá©</div>
                </div>

                <!-- Manual Add Form -->
                <div id="addFormContainer" class="add-form-container">
                    <h3><i class="fas fa-plus-circle"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶¶‡¶ø‡¶¨‡ßá üçõ</h3>
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ / ‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                            <input type="text" id="newName" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ö‡¶®‡ßç‡¶¶‡ßç‡¶∞‡¶™‡¶æ‡¶°‡¶º‡¶æ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶">
                        </div>
                        <div class="form-group full-width">
                            <label>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ (‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§)</label>
                            <textarea id="newAddress" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Æ‡¶æ‡¶ß‡¶¨‡¶™‡¶æ‡¶∂‡¶æ, ‡¶¨‡¶æ‡¶¨‡ßÅ‡¶ó‡¶û‡ßç‡¶ú, ‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤"></textarea>
                        </div>
                        <div class="form-group">
                            <label>‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó</label>
                            <select id="newDivision">
                                <option value="‡¶¢‡¶æ‡¶ï‡¶æ">‡¶¢‡¶æ‡¶ï‡¶æ</option>
                                <option value="‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ">‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
                                <option value="‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ">‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ</option>
                                <option value="‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ">‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ</option>
                                <option value="‡¶∏‡¶ø‡¶≤‡ßá‡¶ü">‡¶∏‡¶ø‡¶≤‡ßá‡¶ü</option>
                                <option value="‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤">‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤</option>
                                <option value="‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞">‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞</option>
                                <option value="‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π">‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>‡¶ú‡ßá‡¶≤‡¶æ</label>
                            <input type="text" id="newDistrict" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤">
                        </div>
                        <div class="form-group">
                            <label>‡¶•‡¶æ‡¶®‡¶æ</label>
                            <input type="text" id="newThana" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡¶æ‡¶¨‡ßÅ‡¶ó‡¶û‡ßç‡¶ú">
                        </div>
                        <div class="form-group">
                            <label>‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø‡¶∞ ‡¶ß‡¶∞‡¶£</label>
                            <select id="newType">
                                <option value="üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø</option>
                                <option value="üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø</option>
                                <option value="üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø</option>
                                <option value="ü•£ ‡¶®‡ßá‡¶á">ü•£ ‡¶®‡ßá‡¶á</option>
                            </select>
                        </div>
                         
                         
                    </div>
                    <div style="text-align: center; margin: 1rem 0;">
                        <button class="btn btn-biryani" onclick="getCurrentLocationForForm()">
                            <i class="fas fa-map-marker-alt"></i> ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-secondary" onclick="toggleAddForm()">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
                        <button class="btn btn-primary" onclick="addManualMosque()">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶® üçõ</button>
                    </div>
                </div>

                <!-- section header -->
                <div class="section-header">
                    <h3 onclick="showToast('‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶ ‡¶∏‡¶Æ‡ßÇ‡¶π')"><i class="fas fa-mosque"></i> ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶ ‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                    <div class="badge-district" onclick="showToast('‡ß®‡ß® ‡¶ú‡ßá‡¶≤‡¶æ ¬∑ ‡ß©‡ß® ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø')" id="districtBadge">‡ß®‡ß® ‡¶ú‡ßá‡¶≤‡¶æ ¬∑ ‡ß©‡ß® ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‚ñº</div>
                </div>

                <!-- mosque list container -->
                <div class="mosque-list" id="mosqueList"></div>
            </div>

            <!-- Right Column - Map -->
            <div class="right-column">
                <div id="mapContainer" class="map-container">
                    <div id="locationStatus" class="location-status">
                        <i class="fas fa-circle"></i> ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®
                    </div>
                    <div id="map"></div>
                </div>

                <!-- emoji banner with biryani -->
                <div class="banner-bg">
                    <span>üçõ</span><span>üçõ</span><span>ü•£</span><span>üçõ</span><span>üçõ</span><span>ü•£</span>
                    <span>üçõ</span><span>üçõ</span><span>ü•£</span><span>üçõ</span><span>üçõ</span><span>ü•£</span><span>üçõ</span>
                    <span style="margin-left: 10px; font-size: 2.2rem;">üçõ</span>
                </div>

                <!-- animal icons filter with biryani emoji -->
                <div class="animal-filter-bar">
                    <span onclick="filterByMeat('üêì')" title="‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üêì</span>
                    <span onclick="filterByMeat('üêÑ')" title="‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üêÑ</span>
                    <span onclick="filterByMeat('üêê')" title="‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üêê</span>
                    <span onclick="filterByMeat('ü•£')" title="‡¶®‡ßá‡¶á">ü•£</span>
                    <span style="font-size: 2.5rem; color: #b45f2b;" title="‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø">üçõ</span>
                </div>
            </div>
        </div>

        <!-- footer -->
        <div class="footer-actions">
            <div class="footer-icons">
                <span onclick="showToast('üçõ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶Ü‡¶á‡¶ï‡¶®')">üçõ</span>
                <span onclick="toggleAddForm()">‚ûï</span>
                <span onclick="removeLastMosque()">‚àí</span>
                <span onclick="showToast('üçõ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶Ü‡¶á‡¶ï‡¶®')">üçõ</span>
            </div>
            <div class="footer-bd" onclick="showToast('üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂')">
                üáßüá©
            </div>

         <br>
            <div style="color: green;">
                <b>
                Made by Estiak Ahmed CSE Rangpur
            </b>
            </div>
        </div>
    </div>

    <!-- toast -->
    <div id="toast" class="toast-message"></div>

    <script>
        // ---------- mosque dataset ----------
        let mosqueData = [
            { name: "‡¶ö‡¶®‡ßç‡¶¶‡ßç‡¶∞‡¶™‡¶æ‡¶°‡¶º‡¶æ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡¶æ‡¶ß‡¶¨‡¶™‡¶æ‡¶∂‡¶æ, ‡¶¨‡¶æ‡¶¨‡ßÅ‡¶ó‡¶û‡ßç‡¶ú, ‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", thana: "‡¶¨‡¶æ‡¶¨‡ßÅ‡¶ó‡¶û‡ßç‡¶ú", district: "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", lat: 22.832, lng: 90.326, manual: false },
            { name: "‡¶ï‡ßÅ‡¶∏‡ßÅ‡¶Æ‡ßç‡¶¨‡¶æ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ï‡ßÅ‡¶∏‡ßÅ‡¶Æ‡ßç‡¶¨‡¶æ, ‡¶Æ‡¶æ‡¶®‡ßç‡¶¶‡¶æ, ‡¶®‡¶ì‡¶ó‡¶æ‡¶Å", thana: "‡¶Æ‡¶æ‡¶®‡ßç‡¶¶‡¶æ", district: "‡¶®‡¶ì‡¶ó‡¶æ‡¶Å", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ", lat: 24.790, lng: 88.668, manual: false },
            { name: "‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶ó‡ßç‡¶Ø‡¶æ‡¶∏ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡ßá‡¶ß‡¶æ, ‡¶¨‡ßç‡¶∞‡¶æ‡¶π‡ßç‡¶Æ‡¶£‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶¶‡¶∞, ‡¶¨‡ßç‡¶∞‡¶æ‡¶π‡ßç‡¶Æ‡¶£‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡¶æ", thana: "‡¶¨‡ßç‡¶∞‡¶æ‡¶π‡ßç‡¶Æ‡¶£‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶¶‡¶∞", district: "‡¶¨‡ßç‡¶∞‡¶æ‡¶π‡ßç‡¶Æ‡¶£‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡¶æ", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", lat: 23.650, lng: 91.100, manual: false },
            { name: "‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶¨‡ßá‡¶§‡¶æ‡¶∞ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Ü‡¶ó‡¶æ‡¶∞‡¶ó‡¶æ‡¶Å‡¶ì, ‡¶∂‡ßá‡¶∞‡ßá‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶ó‡¶∞, ‡¶¢‡¶æ‡¶ï‡¶æ", thana: "‡¶∂‡ßá‡¶∞‡ßá‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶®‡¶ó‡¶∞", district: "‡¶¢‡¶æ‡¶ï‡¶æ", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.780, lng: 90.380, manual: false },
            { name: "‡¶∂‡¶æ‡¶π ‡¶∏‡ßÅ‡¶ú‡¶æ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡ßã‡¶ó‡¶≤‡¶ü‡ßÅ‡¶≤‡ßÄ, ‡¶ï‡ßÅ‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ ‡¶∏‡¶¶‡¶∞, ‡¶ï‡ßÅ‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ", thana: "‡¶ï‡ßÅ‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ ‡¶∏‡¶¶‡¶∞", district: "‡¶ï‡ßÅ‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", lat: 23.457, lng: 91.185, manual: false },
            { name: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Ü‡¶®‡ßç‡¶¶‡¶∞‡¶ï‡¶ø‡¶≤‡ßç‡¶≤‡¶æ, ‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", thana: "‡¶Ü‡¶®‡ßç‡¶¶‡¶∞‡¶ï‡¶ø‡¶≤‡ßç‡¶≤‡¶æ", district: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", lat: 22.335, lng: 91.832, manual: false },
            { name: "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ ‡¶¨‡¶°‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶¨‡ßã‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ, ‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ", thana: "‡¶¨‡ßã‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ", district: "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ", lat: 24.372, lng: 88.596, manual: false },
            { name: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü ‡¶∏‡¶¶‡¶∞, ‡¶∏‡¶ø‡¶≤‡ßá‡¶ü", thana: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü ‡¶∏‡¶¶‡¶∞", district: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü", lat: 24.905, lng: 91.873, manual: false },
            { name: "‡¶ó‡¶æ‡¶ú‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ó‡¶æ‡¶ú‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞, ‡¶ó‡¶æ‡¶ú‡ßÄ‡¶™‡ßÅ‡¶∞", thana: "‡¶ó‡¶æ‡¶ú‡ßÄ‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞", district: "‡¶ó‡¶æ‡¶ú‡ßÄ‡¶™‡ßÅ‡¶∞", type: "ü•£ ‡¶®‡ßá‡¶á", typeIcon: "ü•£", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.992, lng: 90.422, manual: false },
            { name: "‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßÅ‡¶¶‡ßç‡¶∞ ‡¶∏‡ßà‡¶ï‡¶§ ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶¶‡¶∞, ‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", thana: "‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶¶‡¶∞", district: "‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", lat: 21.427, lng: 91.985, manual: false },
            { name: "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞, ‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞", thana: "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞", district: "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞", lat: 25.755, lng: 89.247, manual: false },
            { name: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ ‡¶¨‡¶°‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ ‡¶∏‡¶¶‡¶∞, ‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ", thana: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ ‡¶∏‡¶¶‡¶∞", district: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ", lat: 22.845, lng: 89.542, manual: false },
            { name: "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π ‡¶∏‡¶¶‡¶∞, ‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π", thana: "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π ‡¶∏‡¶¶‡¶∞", district: "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π", type: "ü•£ ‡¶®‡ßá‡¶á", typeIcon: "ü•£", division: "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π", lat: 24.753, lng: 90.403, manual: false },
            { name: "‡¶¨‡¶ó‡ßÅ‡¶°‡¶º‡¶æ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶¨‡¶ó‡ßÅ‡¶°‡¶º‡¶æ ‡¶∏‡¶¶‡¶∞, ‡¶¨‡¶ó‡ßÅ‡¶°‡¶º‡¶æ", thana: "‡¶¨‡¶ó‡ßÅ‡¶°‡¶º‡¶æ ‡¶∏‡¶¶‡¶∞", district: "‡¶¨‡¶ó‡ßÅ‡¶°‡¶º‡¶æ", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ", lat: 24.851, lng: 89.371, manual: false },
            { name: "‡¶Ø‡¶∂‡ßã‡¶∞ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Ø‡¶∂‡ßã‡¶∞ ‡¶∏‡¶¶‡¶∞, ‡¶Ø‡¶∂‡ßã‡¶∞", thana: "‡¶Ø‡¶∂‡ßã‡¶∞ ‡¶∏‡¶¶‡¶∞", district: "‡¶Ø‡¶∂‡ßã‡¶∞", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ", lat: 23.168, lng: 89.204, manual: false },
            { name: "‡¶¶‡¶ø‡¶®‡¶æ‡¶ú‡¶™‡ßÅ‡¶∞ ‡¶¨‡¶°‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶¶‡¶ø‡¶®‡¶æ‡¶ú‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞, ‡¶¶‡¶ø‡¶®‡¶æ‡¶ú‡¶™‡ßÅ‡¶∞", thana: "‡¶¶‡¶ø‡¶®‡¶æ‡¶ú‡¶™‡ßÅ‡¶∞ ‡¶∏‡¶¶‡¶∞", district: "‡¶¶‡¶ø‡¶®‡¶æ‡¶ú‡¶™‡ßÅ‡¶∞", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞", lat: 25.631, lng: 88.635, manual: false },
            { name: "‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ ‡¶∏‡¶¶‡¶∞, ‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", thana: "‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ ‡¶∏‡¶¶‡¶∞", district: "‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", type: "ü•£ ‡¶®‡ßá‡¶á", typeIcon: "ü•£", division: "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", lat: 22.359, lng: 90.330, manual: false },
            { name: "‡¶´‡ßá‡¶®‡ßÄ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶´‡ßá‡¶®‡ßÄ ‡¶∏‡¶¶‡¶∞, ‡¶´‡ßá‡¶®‡ßÄ", thana: "‡¶´‡ßá‡¶®‡ßÄ ‡¶∏‡¶¶‡¶∞", district: "‡¶´‡ßá‡¶®‡ßÄ", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", lat: 23.019, lng: 91.400, manual: false },
            { name: "‡¶ï‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ ‡¶¨‡¶°‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ï‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶¶‡¶∞, ‡¶ï‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ", thana: "‡¶ï‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡¶¶‡¶∞", district: "‡¶ï‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ", lat: 23.902, lng: 89.121, manual: false },
            { name: "‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡¶æ‡¶á‡¶ú‡¶¶‡ßÄ, ‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", thana: "‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ ‡¶∏‡¶¶‡¶∞", district: "‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", lat: 22.870, lng: 91.100, manual: false },
            { name: "‡¶ù‡¶æ‡¶≤‡¶ï‡¶æ‡¶†‡¶ø ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ù‡¶æ‡¶≤‡¶ï‡¶æ‡¶†‡¶ø ‡¶∏‡¶¶‡¶∞, ‡¶ù‡¶æ‡¶≤‡¶ï‡¶æ‡¶†‡¶ø", thana: "‡¶ù‡¶æ‡¶≤‡¶ï‡¶æ‡¶†‡¶ø ‡¶∏‡¶¶‡¶∞", district: "‡¶ù‡¶æ‡¶≤‡¶ï‡¶æ‡¶†‡¶ø", type: "ü•£ ‡¶®‡ßá‡¶á", typeIcon: "ü•£", division: "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", lat: 22.644, lng: 90.200, manual: false },
            { name: "‡¶∞‡¶æ‡¶Æ‡¶™‡¶ü‡ßç‡¶ü‡¶ø ‡¶¨‡¶æ‡¶Ø‡¶º‡¶§‡ßÅ‡¶® ‡¶®‡ßÇ‡¶∞ ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶∞‡¶æ‡¶Æ‡¶™‡¶ü‡ßç‡¶ü‡¶ø, ‡¶¨‡¶æ‡¶¨‡ßÅ‡¶ó‡¶û‡ßç‡¶ú, ‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", thana: "‡¶¨‡¶æ‡¶¨‡ßÅ‡¶ó‡¶û‡ßç‡¶ú", district: "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", lat: 22.820, lng: 90.320, manual: false },
            { name: "‡¶Æ‡ßå‡¶≤‡¶≠‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡ßå‡¶≤‡¶≠‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶¶‡¶∞, ‡¶Æ‡ßå‡¶≤‡¶≠‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", thana: "‡¶Æ‡ßå‡¶≤‡¶≠‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶¶‡¶∞", district: "‡¶Æ‡ßå‡¶≤‡¶≠‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü", lat: 24.482, lng: 91.773, manual: false },
            { name: "‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú ‡¶¨‡¶°‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú ‡¶∏‡¶¶‡¶∞, ‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú", thana: "‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú ‡¶∏‡¶¶‡¶∞", district: "‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú", type: "üêê ‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêê", division: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü", lat: 24.384, lng: 91.419, manual: false },
            { name: "‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞‡ßÄ‡¶Ø‡¶º ‡¶ú‡¶æ‡¶Æ‡ßá ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú ‡¶∏‡¶¶‡¶∞, ‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú", thana: "‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú ‡¶∏‡¶¶‡¶∞", district: "‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú", type: "ü•£ ‡¶®‡ßá‡¶á", typeIcon: "ü•£", division: "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü", lat: 25.071, lng: 91.402, manual: false },
            { name: "‡¶¨‡¶æ‡¶Ø‡¶º‡¶§‡ßÅ‡¶≤ ‡¶Æ‡ßã‡¶ï‡¶æ‡¶∞‡¶∞‡¶Æ ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶™‡¶≤‡ßç‡¶ü‡¶®, ‡¶¢‡¶æ‡¶ï‡¶æ", thana: "‡¶™‡¶≤‡ßç‡¶ü‡¶®", district: "‡¶¢‡¶æ‡¶ï‡¶æ", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.730, lng: 90.412, manual: false },
            { name: "‡¶∏‡¶æ‡¶§ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Æ‡¶ø‡¶∞‡¶™‡ßÅ‡¶∞, ‡¶¢‡¶æ‡¶ï‡¶æ", thana: "‡¶Æ‡¶ø‡¶∞‡¶™‡ßÅ‡¶∞", district: "‡¶¢‡¶æ‡¶ï‡¶æ", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.806, lng: 90.368, manual: false },
            { name: "‡¶§‡¶æ‡¶∞‡¶æ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶Ü‡¶∞‡ßç‡¶Æ‡¶æ‡¶®‡¶ø ‡¶ü‡ßã‡¶≤, ‡¶™‡ßÅ‡¶∞‡¶æ‡¶® ‡¶¢‡¶æ‡¶ï‡¶æ, ‡¶¢‡¶æ‡¶ï‡¶æ", thana: "‡¶™‡ßÅ‡¶∞‡¶æ‡¶® ‡¶¢‡¶æ‡¶ï‡¶æ", district: "‡¶¢‡¶æ‡¶ï‡¶æ", type: "ü•£ ‡¶®‡ßá‡¶á", typeIcon: "ü•£", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.715, lng: 90.410, manual: false },
            { name: "‡¶ö‡¶ï‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∂‡¶æ‡¶π‡ßÄ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶", location: "‡¶ö‡¶ï‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞, ‡¶™‡ßÅ‡¶∞‡¶æ‡¶® ‡¶¢‡¶æ‡¶ï‡¶æ, ‡¶¢‡¶æ‡¶ï‡¶æ", thana: "‡¶™‡ßÅ‡¶∞‡¶æ‡¶® ‡¶¢‡¶æ‡¶ï‡¶æ", district: "‡¶¢‡¶æ‡¶ï‡¶æ", type: "üêÑ ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêÑ", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.713, lng: 90.404, manual: false },
            { name: "‡¶π‡ßã‡¶∏‡ßá‡¶®‡ßÄ ‡¶¶‡¶æ‡¶≤‡¶æ‡¶®", location: "‡¶¨‡¶ï‡¶∂‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞, ‡¶™‡ßÅ‡¶∞‡¶æ‡¶® ‡¶¢‡¶æ‡¶ï‡¶æ, ‡¶¢‡¶æ‡¶ï‡¶æ", thana: "‡¶™‡ßÅ‡¶∞‡¶æ‡¶® ‡¶¢‡¶æ‡¶ï‡¶æ", district: "‡¶¢‡¶æ‡¶ï‡¶æ", type: "üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø", typeIcon: "üêì", division: "‡¶¢‡¶æ‡¶ï‡¶æ", lat: 23.724, lng: 90.402, manual: false }
        ];

        // current filter state
        let currentFilter = { type: 'all', value: 'all' };
        let lastSearchTerm = '';
        let userLat = null;
        let userLng = null;
        let map = null;
        let mapInitialized = false;
        let userMarker = null;
        let mosqueMarkers = [];

        // toggle add form
        function toggleAddForm() {
            const form = document.getElementById('addFormContainer');
            if (form.style.display === 'block') {
                form.style.display = 'none';
            } else {
                form.style.display = 'block';
                // Clear form
                document.getElementById('newName').value = '';
                document.getElementById('newAddress').value = '';
                document.getElementById('newDistrict').value = '';
                document.getElementById('newThana').value = '';
                document.getElementById('newLat').value = '';
                document.getElementById('newLng').value = '';
                document.getElementById('newDivision').value = '‡¶¢‡¶æ‡¶ï‡¶æ';
                document.getElementById('newType').value = 'üêì ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø';
            }
        }

        // get current location for form
        function getCurrentLocationForForm() {
            if (navigator.geolocation) {
                showToast('‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...');
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        document.getElementById('newLat').value = position.coords.latitude.toFixed(4);
                        document.getElementById('newLng').value = position.coords.longitude.toFixed(4);
                        showToast('‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá üçõ');
                    },
                    (error) => {
                        showToast('‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø: ' + error.message);
                    }
                );
            } else {
                showToast('‡¶ú‡¶ø‡¶ì‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ');
            }
        }

        // add manual mosque
        function addManualMosque() {
            const name = document.getElementById('newName').value.trim();
            const address = document.getElementById('newAddress').value.trim();
            const district = document.getElementById('newDistrict').value.trim();
            const thana = document.getElementById('newThana').value.trim();
            const division = document.getElementById('newDivision').value;
            const typeFull = document.getElementById('newType').value;
            const lat = parseFloat(document.getElementById('newLat').value);
            const lng = parseFloat(document.getElementById('newLng').value);
            
            // Validate
            if (!name || !address || !district || !thana || isNaN(lat) || isNaN(lng)) {
                showToast('‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¶‡¶ø‡¶®');
                return;
            }
            
            // Extract type icon
            let typeIcon = 'üêì';
            if (typeFull.includes('üêÑ')) typeIcon = 'üêÑ';
            else if (typeFull.includes('üêê')) typeIcon = 'üêê';
            else if (typeFull.includes('ü•£')) typeIcon = 'ü•£';
            
            // Create new mosque
            const newMosque = {
                name: name,
                location: address,
                thana: thana,
                district: district,
                type: typeFull,
                typeIcon: typeIcon,
                division: division,
                lat: lat,
                lng: lng,
                manual: true,
                donated: true
            };
            
            mosqueData.push(newMosque);
            
            // Update map if active
            if (mapInitialized) {
                updateMosqueMarkers();
            }
            
            // Apply filters and render
            applyFilters();
            
            // Hide form
            toggleAddForm();
            
            // Show success message
            showToast('‚úÖ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ' + name + ' üçõ');
            
            // Update district count
            updateDistrictCount();
        }

        // update district count badge
        function updateDistrictCount() {
            const districts = [...new Set(mosqueData.map(m => m.district))];
            const biryaniCount = mosqueData.filter(m => m.typeIcon !== 'ü•£').length;
            document.getElementById('districtBadge').innerHTML = `${districts.length} ‡¶ú‡ßá‡¶≤‡¶æ ¬∑ ${biryaniCount} ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‚ñº`;
        }

        // render mosque list
        function renderMosqueList(data) {
            const container = document.getElementById('mosqueList');
            container.innerHTML = '';
            
            let processedData = [...data];
            if (userLat && userLng) {
                processedData = processedData.map(item => {
                    const distance = getDistance(userLat, userLng, item.lat, item.lng);
                    return { ...item, distance: distance.toFixed(1) };
                });
                processedData.sort((a, b) => a.distance - b.distance);
            }

            processedData.forEach(item => {
                const typeHtml = item.typeIcon === 'ü•£' 
                    ? `<span class="none-biryani">ü•£ ‡¶®‡ßá‡¶á</span>`
                    : `<span class="type-icon">${item.typeIcon}</span> ${item.type.replace(item.typeIcon, '').trim()}`;
                
                const distanceHtml = item.distance ? `<span class="distance-badge">${item.distance} ‡¶ï‡¶ø‡¶Æ‡¶ø</span>` : '';
                const donationBadge = item.manual ? '<span class="donation-badge">üçõ ‡¶¶‡¶æ‡¶®</span>' : '';
                
                const div = document.createElement('div');
                div.className = 'mosque-item';
                div.setAttribute('data-lat', item.lat);
                div.setAttribute('data-lng', item.lng);
                div.setAttribute('data-name', item.name);
                div.onclick = () => flyToMosque(item.lat, item.lng, item.name);
                div.innerHTML = `
                    <div class="mosque-icon">üçõ</div>
                    <div class="mosque-details">
                        <div class="mosque-name">
                            ${item.name} ${distanceHtml} ${donationBadge}
                            <span style="font-size:1.2rem; margin-left:0.2rem;">üçõ</span>
                        </div>
                        <div class="mosque-location">
                            <i class="fas fa-map-pin"></i> 
                            <span>${item.location}</span>
                            <span style="font-size:0.9rem; color:#b45f2b; margin-left:0.2rem;">üìç</span>
                        </div>
                        <div class="biryani-type">${typeHtml}</div>
                    </div>
                `;
                container.appendChild(div);
            });
            
            updateDistrictCount();
        }

        // distance calculation
        function getDistance(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // toggle live map
        function toggleLiveMap() {
            const mapContainer = document.getElementById('mapContainer');
            if (mapContainer.style.display === 'block') {
                mapContainer.style.display = 'none';
                showToast('‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
            } else {
                mapContainer.style.display = 'block';
                showToast('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...');
                initMap();
            }
        }

        // initialize map
        function initMap() {
            if (!mapInitialized) {
                map = L.map('map').setView([23.7, 90.35], 7);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '¬© OpenStreetMap'
                }).addTo(map);
                mapInitialized = true;
            }

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLat = position.coords.latitude;
                        userLng = position.coords.longitude;
                        
                        const exactUserLoc = `‡¶Ö‡¶ï‡ßç‡¶∑‡¶æ‡¶Ç‡¶∂: ${userLat.toFixed(4)}, ‡¶¶‡ßç‡¶∞‡¶æ‡¶ò‡¶ø‡¶Æ‡¶æ: ${userLng.toFixed(4)}`;
                        
                        document.getElementById('locationStatus').innerHTML = 
                            `<i class="fas fa-check-circle" style="color:#2e7d32;"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®: ${exactUserLoc} üçõ`;
                        
                        map.setView([userLat, userLng], 12);
                        
                        if (userMarker) map.removeLayer(userMarker);
                        
                        const userIcon = L.divIcon({
                            className: 'user-marker',
                            html: 'üìç üçõ',
                            iconSize: [30, 30]
                        });
                        
                        userMarker = L.marker([userLat, userLng], { icon: userIcon })
                            .addTo(map)
                            .bindPopup('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® üçõ')
                            .openPopup();
                        
                        updateMosqueMarkers();
                        applyFilters();
                    },
                    (error) => {
                        document.getElementById('locationStatus').innerHTML = 
                            '<i class="fas fa-exclamation-triangle" style="color:#e03a3a;"></i> ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø: ' + error.message + ' üçõ';
                        showToast('‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø');
                    }
                );
            } else {
                document.getElementById('locationStatus').innerHTML = 
                    '<i class="fas fa-exclamation-triangle" style="color:#e03a3a;"></i> ‡¶ú‡¶ø‡¶ì‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ üçõ';
            }
        }

        // update mosque markers
        function updateMosqueMarkers() {
            if (!map) return;
            
            mosqueMarkers.forEach(m => map.removeLayer(m));
            mosqueMarkers = [];
            
            mosqueData.forEach(m => {
                let biryaniEmoji = 'üçõ';
                if (m.typeIcon === 'üêì') biryaniEmoji = 'üêìüçõ';
                else if (m.typeIcon === 'üêÑ') biryaniEmoji = 'üêÑüçõ';
                else if (m.typeIcon === 'üêê') biryaniEmoji = 'üêêüçõ';
                else if (m.typeIcon === 'ü•£') biryaniEmoji = 'ü•£';
                
                if (m.manual) biryaniEmoji = '‚ûï' + biryaniEmoji;
                
                const mosqueIcon = L.divIcon({
                    className: 'biryani-marker',
                    html: biryaniEmoji,
                    iconSize: [30, 30]
                });
                
                const marker = L.marker([m.lat, m.lng], { icon: mosqueIcon })
                    .addTo(map)
                    .bindPopup(`
                        <b>${m.name}</b><br>
                        üìç ${m.location}<br>
                        üçõ ${m.type}<br>
                        ${m.manual ? '<span style="color:#b45f2b;">‚ûï ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ</span>' : ''}
                    `);
                mosqueMarkers.push(marker);
            });
        }

        // fly to mosque
        function flyToMosque(lat, lng, name) {
            if (map) {
                map.flyTo([lat, lng], 17);
                showToast(`üçõ ${name} üçõ`);
            } else {
                showToast('‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶® üó∫Ô∏è');
            }
        }

        // filter functions
        function filterMosques() {
            const term = document.getElementById('searchInput').value.toLowerCase();
            lastSearchTerm = term;
            applyFilters();
        }

        function filterByDivision(division) {
            if (division === 'all') {
                currentFilter = { type: 'all', value: 'all' };
            } else {
                currentFilter = { type: 'division', value: division };
            }
            applyFilters();
            showToast(`${division} ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá üçõ`);
        }

        function filterByBiryaniType() {
            currentFilter = { type: 'biryani', value: 'biryani' };
            applyFilters();
            showToast('‡¶∏‡¶¨ ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá üçõ');
        }

        function filterByMeat(meatIcon) {
            let meatName = '';
            if (meatIcon === 'üêì') meatName = '‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞';
            else if (meatIcon === 'üêÑ') meatName = '‡¶ó‡¶∞‡ßÅ‡¶∞';
            else if (meatIcon === 'üêê') meatName = '‡¶ñ‡¶æ‡¶∏‡¶ø‡¶∞';
            else if (meatIcon === 'ü•£') meatName = '‡¶®‡ßá‡¶á';
            
            currentFilter = { type: 'meat', value: meatIcon };
            applyFilters();
            showToast(`${meatName} ‡¶¨‡¶ø‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶ø ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá üçõ`);
        }

        function applyFilters() {
            let filtered = mosqueData;

            if (lastSearchTerm) {
                filtered = filtered.filter(item => 
                    item.name.toLowerCase().includes(lastSearchTerm) || 
                    item.location.toLowerCase().includes(lastSearchTerm) ||
                    item.thana.toLowerCase().includes(lastSearchTerm) ||
                    item.district.toLowerCase().includes(lastSearchTerm)
                );
            }

            if (currentFilter.type === 'division' && currentFilter.value !== 'all') {
                filtered = filtered.filter(item => item.division === currentFilter.value);
            } else if (currentFilter.type === 'biryani') {
                filtered = filtered.filter(item => item.typeIcon !== 'ü•£');
            } else if (currentFilter.type === 'meat') {
                filtered = filtered.filter(item => item.typeIcon === currentFilter.value);
            }

            renderMosqueList(filtered);
        }

        function setActiveFilter(element) {
            document.querySelectorAll('.filter-chip').forEach(chip => chip.classList.remove('active'));
            element.classList.add('active');
        }

        function removeLastMosque() {
            if (mosqueData.length > 0) {
                mosqueData.pop();
                if (mapInitialized) updateMosqueMarkers();
                applyFilters();
                showToast('‚ûñ ‡¶∂‡ßá‡¶∑ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶ ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá üçõ');
            } else {
                showToast('‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶ ‡¶®‡ßá‡¶á ü•£');
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 1500);
        }

        // initial render
        renderMosqueList(mosqueData);

        // expose functions
        window.filterByMeat = filterByMeat;
        window.addManualMosque = addManualMosque;
        window.removeLastMosque = removeLastMosque;
        window.showToast = showToast;
        window.filterMosques = filterMosques;
        window.filterByDivision = filterByDivision;
        window.filterByBiryaniType = filterByBiryaniType;
        window.setActiveFilter = setActiveFilter;
        window.toggleLiveMap = toggleLiveMap;
        window.toggleAddForm = toggleAddForm;
        window.getCurrentLocationForForm = getCurrentLocationForForm;
        window.flyToMosque = flyToMosque;
    </script>
</body>
</html>